!function(n,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a():"function"==typeof define&&define.amd?define(a):n.AudioPlayer=a()}(this,function(){"use strict";function n(n,a){return'\n    <object id="'+a+'" class="audio-player" type="application/x-shockwave-flash" data="'+n+'" width="1px" height="1px">,\n        <param name="wmode" value="transparent" />\n        <param name="movie" value="'+n+'" />\n        <param name="quality" value="high" />\n        <param name="menu" value="false" />\n        <param name="allowScriptAccess" value="always" />\n        <param name="flashvars" value="movieName='+a+'" />\n    </object>\n  '}var a=function(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")},e=function(){function n(n,a){for(var e=0;e<a.length;e++){var o=a[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(a,e,o){return e&&n(a.prototype,e),o&&n(a,o),a}}(),o=function(){function n(e){a(this,n);var o=e.element;o.innerHTML="<audio></audio>";var t=o.parentNode,i=o.firstChild;t.replaceChild(i,o);var r=this;r.audio=i,i.onloadstart=function(){e.onLoadStart&&e.onLoadStart()},i.onprogress=function(){e.onLoadProgress&&e.onLoadProgress({loaded:0,total:0})},i.oncanplaythrough=function(){e.onLoadComplete&&e.onLoadComplete({url:i.src,duration:i.duration})},i.onplaying=function(){e.onPlayStart&&e.onPlayStart()},i.ontimeupdate=function(){var n=i.currentTime,a=i.duration;e.onPlayProgress&&e.onPlayProgress({played:n,total:a}),n>0&&n===a&&e.onPlayComplete&&e.onPlayComplete()}}return e(n,[{key:"load",value:function(n){var a=this.audio;a.src=n,a.load()}},{key:"play",value:function(n){var a=this.audio;a.src=n,a.play()}},{key:"stop",value:function(){var n=this.audio;n.pause(),n.currentTime=0}},{key:"dispose",value:function(){var n=this.audio;this.audio=n.onloadstart=n.onprogress=n.oncanplaythrough=n.onplaying=n.ontimeupdate=null;var a=n.parentNode;a.removeChild(n)}}]),n}(),t=function(){function o(e){a(this,o);var t="_AudioPlayer_"+i++,r=e.element,u=e.swfUrl;r.innerHTML=n(u,t);var l=r.parentNode,s=r.firstChild;l.replaceChild(s,r);var d=this;d.swf=s,d.name=t;for(var c in e)0===c.indexOf("on")&&(d[c]=e[c]);window[t]=document[t]=o.instances[t]=d}return e(o,[{key:"load",value:function(n){var a=this.swf;a.doAction&&a.doAction("load",n)}},{key:"play",value:function(n){var a=this.swf;a.doAction&&a.doAction("play",n)}},{key:"stop",value:function(){var n=this.swf;n.doAction&&n.doAction("stop")}},{key:"dispose",value:function(){var n=this.swf,a=this.name;n.dispose&&n.dispose(),this.swf=window[a]=document[a]=AudioPlayer.instances[a]=null}}]),o}();t.instances={};var i=0;window.AudioPlayer=t;var r=t,u=document.createElement("audio");u&&u.canPlayType&&"probably"===u.canPlayType("audio/mp3")&&(r=o),r.version="0.0.1";var l=r;return l});
